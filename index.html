<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>riCOM_cpp: riCOM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">riCOM_cpp
   </div>
   <div id="projectbrief">This repository contains the C++ implementation of the riCOM (Real Time Centre Of Mass) algorithm for 4D Scanning electron microscopy.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">riCOM </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://github.com/ThFriedrich/riCOM_cpp/blob/master/.github/workflows/build.yml"><object type="image/svg+xml" data="https://github.com/ThFriedrich/riCOM_cpp/actions/workflows/build.yml/badge.svg" style="pointer-events: none;">BUILD</object></a> <a href="https://opensource.org/licenses/GPL-3.0"><object type="image/svg+xml" data="https://img.shields.io/badge/License-GPL3-brightgreen.svg" style="pointer-events: none;">License: GPL3</object></a></p>
<p>This repository contains the C++ implementation of the riCOM (Real Time Centre Of Mass) algorithm for 4D Scanning electron microscopy as described in <a href="https://www.cambridge.org/core/journals/microscopy-and-microanalysis/article/realtime-integration-center-of-mass-ricom-reconstruction-for-4d-stem/40AC3F51175C32763ADF355E58073355">this publication</a>. At this point it is compatible with .mib files (Quantum Detectors Merlin) and .t3p (Timepix camera) data and can be run in live mode with the Merlin camera.</p>
<p><img src="https://user-images.githubusercontent.com/47680554/164481785-d7407e48-1fa0-4673-a03b-ba80b3a5fcae.png" alt="image" class="inline"/></p>
<h1>Installation</h1>
<h2>Binaries</h2>
<ul>
<li>Just download the precompiled executable for your system from <a href="https://github.com/ThFriedrich/riCOM_cpp/releases">Releases</a> or for the latest development version the artefacts of the automated compilation run from the Repositories "Actions" Tab, for example <a href="https://github.com/ThFriedrich/riCOM_cpp/actions/workflows/build.yml">here</a>!</li>
<li>The Windows version includes additional libraries, which need to be kept in the same folder as the executable. Linux requires SDL2 and FFTW3 libraries on your system (see below).</li>
<li>Alternatively build from source as outlined below. Make sure you clone the repository including submodules: <code>git clone --recurse-submodules -j2 git@github.com:ThFriedrich/riCOM_cpp.git</code></li>
<li>The project uses features of C++ standard 17. You may need appropriate compilers and libraries.</li>
<li>Generally the performance/speed may not be ideal using precompiled binaries. For best results compile on the machine you want to run the software on, using the "native" option for the "ARCH" variable in the CMakeLists.txt file</li>
</ul>
<p><b>Generally build instructions can be followed step by step from the <a href="https://github.com/ThFriedrich/riCOM_cpp/blob/master/.github/workflows/build.yml">automated build setup</a> from command line</b> </p><h2>Build instructions Linux</h2>
<h3>Dependencies</h3>
<ul>
<li><a href="https://gcc.gnu.org/">g++/gcc</a> compiler version 9<ul>
<li><code>sudo apt-get install gcc-9 g++-9</code></li>
</ul>
</li>
<li><a href="https://cmake.org/">make &amp; cmake</a></li>
<li><a href="http://www.libsdl.org">SDL2</a><ul>
<li><code>sudo apt-get install libsdl2-dev libsdl2-image-dev</code></li>
</ul>
</li>
<li><a href="https://fftw.org/">FFTW3</a><ul>
<li><code>sudo apt-get install libfftw3-dev</code></li>
</ul>
</li>
</ul>
<h3>Building from Command Line</h3>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake --config Release ..</div>
<div class="line">make</div>
</div><!-- fragment --><h2>Build instructions Windows</h2>
<h3>Dependencies</h3>
<ul>
<li><a href="https://visualstudio.microsoft.com/vs/community/">Visual Studio Community</a> with C++ Desktop Development Kit or msbuild tools<ul>
<li>including the msvc compiler, cmake and msbuild</li>
</ul>
</li>
<li><a href="http://www.libsdl.org">SDL2</a><ul>
<li>Download 'SDL2-devel-2.0.xx-VC.zip' (Visual C++ 32/64-bit) from <a href="http://www.libsdl.org/download-2.0.php#source">http://www.libsdl.org/download-2.0.php#source</a> and <a href="http://www.libsdl.org/projects/SDL_image/release/SDL2_image-devel-2.0.5-VC.zip">SDL2-image</a></li>
<li>Both zip folder share a common sub-structure. Extract contents of the zips to 'C:/SDL2_VC', merging the contents of both zips into the same folder structure.</li>
</ul>
</li>
<li><a href="https://fftw.org/">FFTW</a><ul>
<li>Download and extract <a href="https://fftw.org/pub/fftw/fftw-3.3.5-dll64.zip">FFTW3 library</a></li>
<li>run <code>lib /def:libfftw3-3.def</code></li>
</ul>
</li>
</ul>
<h3>Building from Command Line (<b>Use <b>Developer</b> Powershell for VS</b>)</h3>
<div class="fragment"><div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ..</div>
<div class="line">msbuild .\RICOM.vcxproj /p:configuration=Release</div>
</div><!-- fragment --><p>The executable RICOM.exe will be in the folder 'build\Release'. Make sure <b>the file 'SDL2.dll' is in the same location as the executable</b>, or copy it to your system libraries, e.g. 'C:\Windows\System32'</p>
<h1>Running the program</h1>
<h2>Running in Live mode with Quantum Detector MerlinEM camera</h2>
<p>To send instructions to the camera a python scipt is executed internally, which relies on the <a href="https://gitlab.com/tfriedrich/merlin_interface">Merlin Interface package</a>. It is a submodule of this repository, but it can also be manually downloaded. The file <a href="https://gitlab.com/tfriedrich/merlin_interface/-/blob/master/merlin_interface/merlin_interface.py">merlin_interface.py</a> should be placed in the same directory as the <a class="el" href="d2/d8f/namespaceRICOM.html">RICOM</a> executable.</p>
<h2>Running example files</h2>
<p>A set of compatible example datasets are provided in an open data repository on <a href="https://zenodo.org/record/5572123#.YbHNzNso9hF">Zenodo</a>.</p>
<h2>Command Line Interface</h2>
<p>The program can be run from command line without opening a GUI. The input file path and other parameters are being specified by additional parameters as listed <a href="https://github.com/ThFriedrich/riCOM_cpp/blob/303d8a9fb5b056810d83f51e5f858dc5cd608d56/src/main.cpp#L880">here</a>. <br  />
 Example usage: </p><div class="fragment"><div class="line">./RICOM -filename default1.mib -nx 64 -ny 64</div>
</div><!-- fragment --><p>This functionality was originally intended for dubugging purposes. It is therefore not fully developed yet, but may be useful for some users nevertheless.</p>
<h1>License</h1>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>**You may contact the <a href="jo.verbeeck@uantwerpen.be">University of Antwerp</a> for alternative licensing options if necessary.**</p>
<h1>Cite</h1>
<p>If you use this software in your research please cite: </p><div class="fragment"><div class="line">@article{</div>
<div class="line">  ricom_2022, </div>
<div class="line">  title={Real-Time Integration Center of Mass (riCOM) Reconstruction for 4D STEM}, </div>
<div class="line">  DOI={10.1017/S1431927622000617}, </div>
<div class="line">  journal={Microscopy and Microanalysis}, </div>
<div class="line">  publisher={Cambridge University Press}, </div>
<div class="line">  author={Yu, Chu-Ping and Friedrich, Thomas and Jannis, Daen and Van Aert, Sandra and Verbeeck, Johan}, </div>
<div class="line">  year={2022}, </div>
<div class="line">  pages={1–12}}</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
